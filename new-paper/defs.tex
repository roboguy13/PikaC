% From https://tex.stackexchange.com/questions/235118/making-a-thicker-cdot-for-dot-product-that-is-thinner-than-bullet
\makeatletter
\newcommand*\bigcdot{\mathpalette\bigcdot@{.5}}
\newcommand*\bigcdot@[2]{\mathbin{\vcenter{\hbox{\scalebox{#2}{$\m@th#1\bullet$}}}}}
\makeatother

\newcommand {\Pika} {\textsf{Pika}}
\newcommand {\PikaCore} {\textsf{PikaCore}}

\newcommand {\instExpr} {\keyword{inst}}

\newcommand {\labinfer} [3] [] {\infer[{\textsc{#1}}]{#2}{#3}}

% \newcommand {\keyword} [1] {\textsf{#1}}
\newcommand {\keyword} [1] {\textbf{#1}}

\newcommand {\Int} {\keyword{Int}}
\newcommand {\Bool} {\keyword{Bool}}
\newcommand {\Type} {\keyword{Type}}
% \newcommand {\layout} [1] {\keyword{layout}(#1)}
\newcommand {\layout} {\keyword{layout}}

\newcommand {\data} {\keyword{data}}

\newcommand {\inL} {\keyword{inL}}
\newcommand {\inR} {\keyword{inR}}
\newcommand {\fold} {\keyword{fold}}
\newcommand {\unfold} {\keyword{unfold}}
\newcommand {\fst} {\keyword{fst}}
\newcommand {\snd} {\keyword{snd}}
\newcommand {\either} {\keyword{either}}

\newcommand {\outs} {\longrightarrow}

\newcommand {\Pair} {\otimes}
\newcommand {\Either} {\oplus}
\newcommand {\RecTy} {\mu}

\newcommand {\monic} {\rightarrowtail}

\newcommand {\type} {\textsf{type}}
\newcommand {\ctype} {\textsf{ctype}}
\newcommand {\adt} {\textsf{adt}}

\newcommand {\LayoutDefs} {\mathcal{L}}

\newcommand {\matchWith} [1] {\keyword{case}\,#1\,\keyword{of}\,}
\newcommand {\layoutmatch} [1] {\keyword{layoutcase}\,#1\,\keyword{of}\,}

\newcommand {\withIn} [1] {\keyword{with}\,#1\,\keyword{in}\,}
\newcommand {\letPure} [1] {\keyword{letpure}\,#1\,\keyword{in}\,}

\newcommand{\cond}{\textnormal{cond}}

\newcommand{\Pure}{\textnormal{Pure}}
\newcommand{\Spatial}{\textnormal{Spatial}}


% % Based on https://tex.stackexchange.com/questions/451786/how-do-i-put-a-circle-around-a-symbol
% \makeatletter
% \newcommand {\osep}{\mathbin{\mathpalette\make@circled\ast}}
% \newcommand{\make@circled}[2]{%
%   \ooalign{$\m@th#1\smallbigcirc{#1}$\cr\hidewidth$\m@th#1#2$\hidewidth\cr}%
% }
% \newcommand{\smallbigcirc}[1]{%
%   \vcenter{\hbox{\scalebox{0.77778}{$\m@th#1\bigcirc$}}}%
% }
% \makeatother

% \newcommand {\lowerExpr} {\keyword{lower}}
% \newcommand {\liftExpr} {\keyword{lift}}
\newcommand {\instantiate} {\keyword{instantiate}}
\newcommand {\apply} {\keyword{apply}}

\newcommand {\liftExpr} {\keyword{lift}}

\newcommand {\tyApply} {\mathbin{@}}

\newcommand {\isA} {\sim}

\newcommand {\ra} {\rightarrow}
\newcommand {\Ra} {\Rightarrow}

\newcommand {\Dargent} {{\sc Dargent}}

\newcommand {\highlight} [1] {\begin{tcolorbox}[hbox] #1 \end{tcolorbox}}

\newcommand {\tyLambda} {\mathrm{\Lambda}}

\newcommand {\argCount} [1] {N\sem{#1}}
\newcommand {\namesem} [1] {\Var^{\argCount{#1}}}

% \newcommand {\pcsubscript} {\textsf{PC}}
% \newcommand {\step} {\longrightarrow}
% \newcommand {\steps} {\longrightarrow^{*}}
% \newcommand {\pcstep} {\step_{\pcsubscript}}
% \newcommand {\pcsteps} {\steps_{\pcsubscript}}
% \newcommand {\pcNotionStep} {\rightsquigarrow_{\pcsubscript}}

\newcommand {\FV} {\textsf{FV}}

% \newcommand {\bigstep} {\Downarrow}
% \newcommand {\pcStep} {\bigstep_{\pcsubscript}}

% \newcommand {\defStep} {\bigstep_{\pcsubscript}}

\newcommand {\val} {\textsf{value}}

\newcommand {\fresh} [1] {#1 \textrm{ fresh}}

\newcommand {\recspec} [1] {\langle #1 \rangle}

\newcommand {\Layout} [1] {\keyword{Layout}(#1)}

% \newcommand {\todo} [1] {\text{{\color{red}TODO}: #1}}
%
\newcommand {\dom} {\textsf{dom}}
\newcommand {\range} {\textsf{range}}

% \newcommand {\ssl} [2] {\keyword{ssl}(#1) \{ #2 \}}
% \newcommand {\ssl} [1] {\keyword{ssl} \{ #1 \}}
\newcommand {\sslmath} [3] {\ssl\{ #1 \}\{ #2 \}\{ #3 \}}
\newcommand {\ssl} {\keyword{layout}}
\newcommand {\SSL} {\keyword{SSL}}

\newcommand {\synth} {\keyword{synth}}

\newcommand {\synthsep} {\mathbin{;;}}
\newcommand {\Not} {\keyword{not}}

\newcommand {\app} {\mathbin{++}}

\newcommand {\SuSLik} {SuSLik}
\newcommand {\SuSLang} {SuSLang}

% \newcommand {\Var} {\textsf{Var}}

% \newcommand {\Heap} {\textsf{Heap}}

\newcommand {\lifted} [1] {#1_{\bot}}

\newcommand {\eq} {\stackrel{\bigcdot}{=}}
\newcommand {\defeq} {:=}
\newcommand {\ok} [1] {\;\textsf{ok}_{#1}}

\newcommand {\typesem} [1] {\mathcal{A}_{#1}}

\newcommand {\True} {\keyword{True}}
\newcommand {\False} {\keyword{False}}

\newcommand {\generate} {\keyword{generate}}

\newcommand {\vdashpc} {\vdash_{\textsf{PC}}}

\newcommand {\fboxNewlines} {\\\\\\}

\newcommand {\layoutParams} {\textsf{params}}

\newcommand{\eg}{\emph{e.g.}}
\newcommand{\etal}{\emph{et~al.}}

\newcommand{\sep}{*}


\newcommand{\step} {\ensuremath{\longmapsto}}
\newcommand{\tstep} {\ensuremath{\Downarrow}}
\newcommand{\defstep} [1] {\ensuremath{\xmapsto{\textnormal{fn-def}}_{#1}}}
\newcommand{\Cstep} {\ensuremath{\longmapsto_{\mathfrak{C}}}}

\newcommand{\Expr} {\textnormal{Expr}}
\newcommand{\Heap} {\textnormal{Heap}}
\newcommand{\Store} {\textnormal{Store}}
\newcommand{\Var} {\textnormal{Var}}
\newcommand{\Loc} {\textnormal{Loc}}
\newcommand{\Val} {\textnormal{Val}}
\newcommand{\FsVal} {\textnormal{FsVal}}
% \newcommand{\labinfer} [3] [] {\infer[{\textsc{#1}}]{#2}{#3}}
% \newcommand{\fresh} {\mathbin{\#}}

\newcommand{\freshLoc} [1] {#1\;\textnormal{fresh}}
\newcommand{\freshVar} [1] {#1\;\textnormal{fresh}}

\newcommand{\FsStore} {\textnormal{FsStore}}
\newcommand{\VarSet} {V}

\newcommand{\lowerS} [2] {\texttt{lower}_{#1}(#2)}
\newcommand{\instantiateS} [2] {\texttt{inst}_{#1}(#2)}

\newcommand{\emptyheap} {\varnothing}

\newcommand{\emp} {\texttt{emp}}
\newcommand{\pointsto} {\ensuremath{\mathbin{\texttt{:->}}}}

\newcommand{\tname}[1]{\textsf{#1}}

\newcommand {\tool} {\Pika\xspace}
\newcommand {\suslik} {\SuSLik\xspace}


\newcommand{\sem} [1] {\llbracket#1\rrbracket}
\newcommand{\Tsem} [2] {\mathcal{T}\sem{#1}_{#2}}

\newcommand{\concrete} [1] {\textnormal{\;concrete$_{#1}$}}

\newcommand{\Start} [1] {{\color{cyan} #1}}
\newcommand{\End} [1] {{\color{orange} #1}}

\newcommand{\StartSigma} {\Start{\sigma}}
\newcommand{\EndSigma} {\End{\sigma'}}

\newcommand{\StartPair} {(\StartSigma, \Start{h})}
\newcommand{\EndPair} {(\EndSigma, \End{h'})}


\definecolor{pblue}{rgb}{0.13,0.13,1}
\definecolor{pgreen}{rgb}{0,0.5,0}
\definecolor{pred}{rgb}{0.7,0,0}
\definecolor{pgrey}{rgb}{0.46,0.45,0.48}
% \definecolor{ppurple}{rgb}{0.55,1,0,0.15}

\newcommand{\todo}[1]{\textcolor{pred}{(TODO: {#1})}}
\newcommand{\zy}[1]{\textcolor{pred}{(Ziyi: {#1})}}

\lstdefinelanguage{SynLang}{
  keywords={new, let, if, else, null, return, while},
  ndkeywords={bool, int, void, loc},
  mathescape=true,
  showspaces=false,
  showtabs=false,
  breaklines=true,
  showstringspaces=false,
  breakatwhitespace=true,
  lineskip=-0.9pt,
  morecomment=[l]{//}, % l is for line comment
  morecomment=[s]{/*}{*/}, % s is for start and end delimiter
  basewidth={0.54em, 0.4em},%
  basicstyle=\footnotesize\ttfamily,
  keywordstyle={\color{pred}\ttfamily\bfseries},
  ndkeywordstyle={\color{pblue}\ttfamily\bfseries},
  commentstyle={\color{ccomment}\itshape},
  numbers=none,
}



\newcommand{\pts}{\mapsto}
\newcommand{\code}[1]{\lstinline[language=SynLang,basicstyle=\small\ttfamily,mathescape=true]{#1}}

\newcommand{\rulename}[1]{\textsc{#1}}
\newcommand{\func}{\textit{func}\xspace}
\newcommand{\writer}{\rulename{Write}\xspace}
\newcommand{\writeri}{\rulename{WriteRO}\xspace}
\newcommand{\funcwrite}{\rulename{Funcwrite}\xspace}
\newcommand{\inplace}{\textit{inplace}\xspace}
\newcommand{\tempfuncalloc}{\rulename{Tempfuncalloc}\xspace}
\newcommand{\temppredalloc}{\rulename{Temppredalloc}\xspace}
\newcommand{\tempfuncfree}{\rulename{Tempfuncfree}\xspace}
\newcommand{\temppredfree}{\rulename{Temppredfree}\xspace}
\newcommand{\inplacewrite}{\rulename{Inplacewrite}\xspace}



% \newcommand{\mcode}[1]{{\ensuremath{\tt #1}}}
\newcommand{\mcode}[1]{{\ensuremath{#1}}}
\newcommand{\vars}[1]{\mathsf{Vars}\left({#1}\right)}

\newcommand{\set}[1]{\left\{{#1}\right\}}
\newcommand{\bl}[1]{{\color{pblue}{#1}}}
\newcommand{\asn}[1]{{\bl{\set{#1}}}}

\newcommand{\trans}[3]{\left.\bl{#1} \!\leadsto\! \bl{#2} \right| #3}
\newcommand{\translong}[3]{\left.\bl{#1} \!\leadsto\! \bl{#2} \right| #3}
\newcommand{\prog}{c}
\newcommand{\osep}{\ast}
\newcommand{\env}{\Gamma}
\newcommand{\deref}[1]{*{#1}}

\newcommand{\iann}[1]{\mcode{ {#1}}} %immutability annotation
\newcommand{\writeontop}[2]{\mathrel{\stackrel{\makebox[0pt]{\mbox{\tiny{#2}}}}{#1}}}
\newcommand{\spointsto}[2]{{#1}~{\pts}~{#2}}
\newcommand{\opointsto}[2]{\spointsto{\angled{#1}}{#2}}
\newcommand{\ispointsto}[3]{#1{\writeontop{\ \!\pts\ \!}{\iann{#3}}}{#2}} % simple points-to, no angled parentheses


% From https://tex.stackexchange.com/questions/502652/define-tcolorbox-in-math-mode
\newtcbox{\boxtext}{on line,colback=white,colframe=black,size=fbox,arc=3pt,boxrule=0.8pt}
\newcommand{\boxmath}[1]{\boxtext{$#1$}}

% https://tex.stackexchange.com/questions/24132/overline-outside-of-math-mode
\makeatletter
\newcommand*{\textoverline}[1]{$\overline{\hbox{#1}}\m@th$}
\makeatother

