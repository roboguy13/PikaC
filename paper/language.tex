\section{Syntax}

\subsection{Shared Syntax}

The following syntactic forms are shared between the \Pika{} surface language and \PikaCore.

\begin{align*}
  &i ::= \cdots \mid -2 \mid -1 \mid 0 \mid 1 \mid 2 \mid \cdots
  \\
  &b ::= \True{} \mid \False
  \\
  &e ::= x \mid i \mid b \mid \lambda x.\; e
  \\
  &\tau ::= \Int \mid \Bool \mid \tau \ra \tau
\end{align*}

\subsection{\Pika{} Syntax}
\begin{align*}
  &e ::= \cdots \mid \apply_{\alpha}(e) \mid \liftExpr_{\alpha}(e) \mid \Lambda (\alpha \isA \layout{X}).\; e
  \\
  &\tau ::= \cdots \mid X \mid \alpha \mid e\; e \mid (\alpha \isA \layout{X}) \Ra \tau
\end{align*}

\subsection{\PikaCore{} Syntax}
\begin{align*}
  &e ::= \cdots \mid e\; \overline{a} \mid \ssl{\overline{P}} \mid \withIn{x := e} e
  \\
  &a ::= \{ \overline{x} \} \mid \{ i \} \mid \{ b \}
  \\
  &\tau ::= \cdots \mid \SSL(n)
  \\
  &P ::= \ell \mapsto e
  \\
  &\ell ::= x \mid (x + n)
  \\
  &n ::= 0 \mid 1 \mid 2 \mid \cdots
\end{align*}

The general form of a one-parameter \PikaCore{} function definition is
\begin{align*}
  &f : \SSL(m) \ra \SSL(n)\\
  &f\; \{ \overline{\ell \mapsto y} \} \ra \{ \overline{r} \} := e\\
  &f\; \{ \overline{\ell' \mapsto y} \} \ra \{ \overline{r} \} := e'\\
  &\cdots
\end{align*}

\noindent
where $\overline{r}$ are the names of the output parameters. These output parameters
must be the same in each branch and it is also required that the number of output parameters matches the type signature: $|\overline{r}| = n$.

Output parameters are given in \PikaCore{} as part of the \verb|with-in| construct:

\begin{align*}
  \withIn{\{ a, b \} := f\; \{ x \}} e
\end{align*}

This applies the function $f$ to the input parameter $x$ and gives $a$ and $b$ as output parameters. These two
output parameters of the application are brought into scope for the \PikaCore{} expression $e$.

