\section{Examples}
\label{sec:examples}

\subsection{\Pika{} 1}

Working \Pika{} 1 examples are presented in Figure~\ref{fig:size-comparison}. For each example, we compare the AST size of the \Pika{} code with that of the generated \SuSLik{} code. This is a rough measure of the relative expressiveness of \Pika{} and \SuSLik{} on these examples. Each example in the list consists of a single function which was tested by hand.

The \verb|filterLt9| example makes use of the Boolean guard feature. Guards must always occur at the level of a function
definition, rather than inside of a subexpression. On the other hand, the \verb|maximum| example uses the \lstinline[language=Pika]{if-then-else}
construct. This is necessary since it occurs inside of a \lstinline[language=Pika]{let}. The \verb|leftList| example uses two different
ADTs: lists and binary trees. A singly-linked list layout is used for the list and a linked representation is used as a layout for the binary tree.

\begin{figure}[b]
\setlength{\abovecaptionskip}{5pt}
\setlength{\belowcaptionskip}{-15pt}
\begin{center}
  \begin{table}[H]
  \begin{tabular}{|c|c|c|c|}
    \hline
    Name & \suslik size & \tool 1 size & \tool 1 size / \suslik size\\
    \hline
    \verb|append| & 164 & 84 & 0.512 \\
    \verb|cons| & 82 & 52 & 0.634 \\
    \verb|filterLt9| & 136 & 66 & 0.485 \\
    \verb|singleton| & 70 & 47 & 0.671 \\
    \verb|map| & 147 & 93 & 0.633 \\
    \verb|mapSum| & 138 & 97 & 0.703 \\
    \verb|maximum| & 106 & 61 & 0.575 \\
    \verb|leftList| & 144 & 104 & 0.722 \\
    \verb|take| & 180 & 112 & 0.622\\
    \hline
  \end{tabular}
  \end{table}
\end{center}
  \caption{\tool 1 spec size vs generated SSL spec size measured in number of AST nodes}
  \label{fig:size-comparison}
\end{figure}

\subsection{\Pika{} 2}

Version 2 of \Pika{} is a rewrite of version 1 and it is missing a couple of features of version 1. However, it has the \synth{} feature. It also has the groundwork for layout polymorphism to be implemented. The second aspect, in particular, is a substantial change from version 1 and motivated the rewrite.

Figure~\ref{fig:pika-2-examples} is a table of \Pika{} 2 examples together with the number of functions they have (not including \synth). These functions were tested using the unit testing framework built into \Pika{} 2.

The \lstinline[language=Pika]{synth} feature is used in the \verb|set| example for two functions: The \verb|append| function mentioned in \autoref{sec:synth} and the
\verb|setToSll| function that converts set values to linked list values:

\begin{lstlisting}[language=Pika]
synth setToSll : SetLayout @s -> Sll @s;
\end{lstlisting}

\begin{figure}
  \begin{tabular}{|c|c|}
    \hline
    Name & \# of functions\\
    \hline
    \verb|add1Head| & 1\\
    \verb|anagram| & 4\\
    \verb|fact| & 1\\
    \verb|filterLt| & 1\\
    \verb|heap| & 6\\
    \verb|leftList| & 1\\
    \verb|mapAdd| & 1\\
    \verb|maximum| & 1\\
    \verb|set| & 3\\
    \verb|sum| & 1\\
    \verb|take| & 1\\
    \verb|treeSize| & 1\\
    \hline
  \end{tabular}
  \caption{\Pika{} 2 examples}
  \label{fig:pika-2-examples}
\end{figure}                   

\begin{figure}
  \input{results.tex}
  \caption{\Pika{} 2 compilation and synthesis runtimes (in seconds)}
\end{figure}

